% setdefault('napaka', '')
% setdefault('naslov', 'Dodajanje novega zajtrka')
% rebase('base.html', naslov=naslov, napaka=napaka)

% if defined('zajtrk'):
<form action="/zaposleni/zajtrki/uredi/{{zajtrk[0]}}" method="post">
% else:
<form action="/zaposleni/zajtrki/dodaj" method="post">
% end
    <table class="table table-borderless">
        <tr>
            <td>
                <span>Id:</span> 
            </td>
            <td>
                % if defined('zajtrk'):
                    {{zajtrk[0]}}
                % else:
                <input name="id" type="number" required
                oninput="preveriPolje(this)"
                oninvalid="preveriPolje(this)" 
                />  
                % end
            </td>
        </tr>
        <tr>
            <td>
                <span>Ime:</span>
            </td>
            <td>
                % if defined('zajtrk'):
                <input name="ime" type="text" value="{{zajtrk[1]}}" />
                % else:
                <input name="ime" type="text" required
                oninput="preveriPolje(this)"
                oninvalid="preveriPolje(this)" 
                />
                % end
            </td>
        </tr>
        <tr>
            <td>
                <span>Cena:</span>
            </td>
            <td>
                % if defined('zajtrk'):
                <input name="cena" type="number" value="{{zajtrk[2]}}" />€
                % else:
                <input name="cena" type="number" step="0.01" required
                oninput="preveriPolje(this)"
                oninvalid="preveriPolje(this)" 
                />€
                % end
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                % if defined('zajtrk'):
                <input value="Popravi zajtrk" type="submit" />
                % else:
                <input value="Dodaj nov zajtrk" type="submit" />
                % end
            </td>
        </tr>
    </table>
</form>

<script>
    function preveriPolje(polje) {
        if(polje.validity.valueMissing) {
            polje.setCustomValidity('Obvezno polje')
        } else if(polje.validity.typeMismatch) {
            polje.setCustomValidity('Vnesti morate število')
        } else if(polje.validity.stepMismatch) {
            polje.setCustomValidity('Cena je lahko zaokrožena na največ dve decimalki')
        } else {
            polje.setCustomValidity('')
        }
    }
</script>
